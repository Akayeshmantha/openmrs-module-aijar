<htmlform formName="HCT Client Card"
          formDescription="Client Testing Card"
          formEncounterType="b53aaeaa-646b-4837-9a5a-dec6dbeae4f8"
          formUuid="b5c62a98-84d3-43e8-a9be-972185070dd4"
          formVersion="1.2">
    <macros>
        headerColor =#8fabc7
        fontOnHeaderColor = white
    </macros>

    <style>

        .ai-page-frame {
        padding:
        5px;
        background-color: white;
        font-family:
        'Lucida Grande',
        'Lucida
        Sans',
        Arial, sans-serif;
        float:
        left;
        width:
        100%;
        clear: both;
        display:
        block;
        font-size: 12px;
        }
        .section{
        width: 99%;
        margin-bottom:
        10px;
        }
        .section
        fieldset{
        width: 95%;
        }

        .entry-point th,
        .entry-point td {
        padding: 5px
        10px;
        border: 1px solid
        #FFF;
        }

        form input,
        form select, form
        textarea, form
        ul.select, .form
        input, .form
        select,
        .form textarea,
        .form ul.select {
        min-width: 30%;
        margin-left: 10px;
        padding: 10px;
        }
        form select, .form
        select {
        min-width: auto;
        }

        select
        {
        height: 26px;
        padding: 0 0 0
        8px;
        overflow:
        hidden;
        position:
        relative;
        border: 1px
        solid
        #aaa;
        white-space:
        nowrap;
        line-height: 26px;
        color:
        #444;
        text-decoration:
        none;
        border-radius: 4px;
        background-clip:
        padding-box;
        -webkit-touch-callout:
        none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select:
        none;
        user-select: none;
        background-color: #fff;
        background-image:
        -webkit-gradient(linear, left
        bottom, left top,
        color-stop(0, #eee),
        color-stop(0.5, #fff));
        background-image:
        -webkit-linear-gradient(center bottom, #eee 0%, #fff
        50%);
        background-image: -moz-linear-gradient(center bottom, #eee 0%,
        #fff
        50%);
        filter:
        progid:DXImageTransform.Microsoft.gradient(startColorstr =
        '#ffffff',
        endColorstr = '#eeeeee', GradientType = 0);
        background-image:
        linear-gradient(top, #fff 0%, #eee 50%);
        }

        .ai-html-row{
        width: 100%;
        float:left;
        }

        .ai-html-row-col2{
        width: 49%;
        float:left;
        }

        .ai-html-row-col2 fieldset{
        width: 90%;
        }

        .ai-page-content{
        width: auto;
        overflow-x: scroll;
        }

        form select, .form select {
        min-width:
        auto;
        }

        form label, .form label {
        float: left;
        padding: 0px 10px 0 0;
        }

        .section-b label {
        float: left;
        min-width: 30%;
        }

        .label-right{
        text-align: right;
        font-style: italic;
        }

    </style>

    <script type="text/javascript">


        function enable_disable_fpm(enableDisable_fpmethod){

        var fp_combo = $(enableDisable_fpmethod).find('select');

        var selected_value = jQuery.trim(fp_combo.find(":selected").text());

        var disable = selected_value.toUpperCase()
        !="YES"
        $(".EnableDisablefpmethodchild").find("input").attr("disabled",disable );

        }

        function enable_disable_partner(enableDisable_partner){

        var fp_combo = $(enableDisable_partner).find('select');

        var selected_value = jQuery.trim(fp_combo.find(":selected").text());

        var disable = selected_value.toUpperCase()
        !="YES"
        $(".EnableDisablepartnerchild").find("input").attr("disabled",disable );

        }

        function enable_disable_GurdianConsent(enableDisable_GurdianConsent){

        var fp_combo = $(enableDisable_GurdianConsent).find('select');

        var selected_value = jQuery.trim(fp_combo.find(":selected").text());

        var disable = selected_value.toUpperCase()
        !="NO"
        $(".EnableDisableGurdianConsentchild").find("input").attr("disabled",disable );

        }


        if(jQuery){
        $(document).ready(function(){
        if ( $.browser.msie ) {
        $(":checkbox").click(function(){
        $(this).change();
        });
        }

        $("#comfirmedDate").change(function() {

        alert($(this).find("input[type$='text']").val() );

        });

        $('[class^="FamilyMemberEnableDisable"]').change(function() {
        enable_disable_fm($(this));
        });

        $('[class^="FamilyMemberEnableDisable"]').each(function(){
        enable_disable_fm( $(this));
        });


        $('[class^="ExposedInfantEnableDisable"]').change(function() {
        enable_disable_ei($(this));
        });


        $('[class^="ExposedInfantEnableDisable"]').each(function(){
        enable_disable_ei( $(this))
        });

        $('[class^="ArtCareEnableDisable"]').change(function() {
        enable_disable_ac($(this));
        });


        $('[class^="ArtCareEnableDisable"]').each(function(){
        enable_disable_ac( $(this))
        });

        $(".EnableDisablefpmethod").change(function() {

        enable_disable_fpm(this);

        });


        $(".EnableDisablefpmethod").each(function() {

        enable_disable_fpm(this);
        });


        $(".EnableDisablePatner").change(function() {

        enable_disable_Patner(this);

        });


        $(".EnableDisablePatner").each(function() {

        enable_disable_Patner(this);
        });


        $(".EnableDisableGurdianConsent").change(function() {

        enable_disable_GurdianConsent(this);

        });


        $(".EnableDisableGurdianConsent").each(function() {

        enable_disable_GurdianConsent(this);
        });


        $(".enableDisable").each(function(){
        var group = $(this);
        function disableFn(){
        group.children("#disabled").fadeTo(250,1);
        group.children("#disabled").find(":checkbox").attr("checked",false); //uncheck
        // group.children("#disabled").find("input[type$='text']").val("");
        group.children("#disabled").find("input").attr("disabled",true); //disable
        group.children("#disabled").find("select").attr("disabled",true);
        }
        function enableFn(){
        group.children("#disabled").fadeTo(250,1);
        group.children("#disabled").find("input").attr("disabled",false);
        group.children("#disabled").find("select").attr("disabled",false);

        }
        disableFn();
        $(this).children("#trigger").find(":checkbox:first").change(function(){
        var checked = $(this).attr("checked");
        if(checked == true){
        enableFn();
        }else{
        disableFn();
        }
        });
        });


        $(".checkboxGroup").each(function(){
        var group = $(this);
        var uncheckAll = function(){
        group.find("input[type$='checkbox']").attr("checked",false);
        group.find("input[type$='checkbox']").change();
        }
        var uncheckRadioAndAll = function(){
        group.find("#checkboxAll,#checkboxRadio").find("input[type$='checkbox']").attr("checked",false);
        group.find("#checkboxAll,#checkboxRadio").find("input[type$='checkbox']").change();
        }


        group.find("#checkboxAll").find("input").click(
        /* This was tricky... A number of things needed to happen
        Basically, This is supposed to treat a group of inputs as if
        were all one big checkbox. It is designed so that a checkbox
        can be next to an input, and the user clicks the input, the
        checkbox checks as well. But, when the user clicks the checkbox,
        the browser marks the checkbox as checked. Therefore, when we check
        if the checkbox is already checked, it always respondes true...
        We needed to have 2 cases: when the clicking action is on the first checkbox
        and when the action is on any other. */
        function(){
        var flip;
        var checked = $(this).siblings(":checkbox:first").attr("checked");
        if($(this).attr("name") == $(this).parents("#checkboxAll:first").find(":checkbox:first").attr("name")){
        checked = $(this).attr("checked");
        flip = checked;
        }else{
        flip = !checked;
        }
        if($(this).attr("type") == "text") if(flip == false) flip = !filp; // this is so the user doesn't go to check
        the checkbox, then uncheck it when they hit the input.
        uncheckAll();
        $(this).parents("#checkboxAll:first").find(":checkbox").attr("checked",flip);
        $(this).parents("#checkboxAll:first").find(":checkbox").change();
        }
        );


        group.find("#checkboxRadio").find("input[type$='checkbox']").click(function(){
        uncheckAll();
        $(this).siblings("input[type$='checkbox']").attr("checked",false);
        $(this).attr("checked",true);
        $(this).change();
        });

        group.find("#checkboxCheckbox").click(
        function(){
        uncheckRadioAndAll();
        }
        );
        });
        });
        }


    </script>
    <div class="ai-page-frame">
        <div class="headers" style="text-align: center;">
            <h3>HCT Client Card</h3>
        </div>
        <section>
            <table>
                <tbody>
                    <tr>
                        <td>
                            <label>Date:</label>
                            <encounterDate default="today"/>
                        </td>
                        <td>
                            <label>Point of Testing:</label>
                            <encounterLocation default="1"/>
                        </td>
                        <td>
                            <label>Center Type:</label>
                            <obs conceptId="99457" answerConceptIds="99455,99456" answerLabels="1. Static,2. Outreach"/>
                        </td>
                    </tr>
                    <includeIf velocityTest="$patient.age &lt; 12">
                        <tr>
                            <td colspan="3">

                                <label>Accompanied by:</label>
                                <obs conceptId="99457" answerConceptIds="90012,90016,99363"
                                     answerLabels="Mother,Father, Guardian"/>
                            </td>
                        </tr>
                    </includeIf>
                </tbody>
            </table>
        </section>
        <section>
            <h3>Section B:</h3>
            <table class="section-b">
                <tbody>
                    <tr>
                        <td>
                            <label>Pre -Test Counseling done/information given:</label>
                        </td>
                        <td colspan="3">
                            <obs conceptId="162830" answerConceptIds="1065, 1066" answerLabels="Yes, No"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label>Counseled as:</label>
                        </td>
                        <td colspan="3">
                            <obs conceptId="99368" answerConceptIds="99365,99367,99366"
                                 answerLabels="Individual, Couple, Group"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label>Approach:</label>

                        </td>
                        <td colspan="3">
                            <obs conceptId="99462" answerConceptIds="162831,162832" answerLabels="CICT, PITC"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label>Have you ever tested for HIV before?:</label>

                        </td>
                        <td colspan="3">
                            <obs id="br" conceptId="99464" answerConceptIds="1065,1066" answerLabels="Yes,No"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                        </td>
                        <td style="background: #DADADA;">
                            <label>
                                <b>3 months</b>
                            </label>
                        </td>
                        <td style="background: #DADADA;">
                            <label>
                                <b>6 months</b>
                            </label>
                        </td>
                        <td style="background: #DADADA;">
                            <label>
                                <b>12 months</b>
                            </label>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label>
                                Previously tested for HIV in last:
                            </label>
                        </td>
                        <td>
                            <obs id="br" conceptId="99468" answerConceptId="99465" answerLabel=""/>
                        </td>
                        <td>
                            <obs id="br" conceptId="99468" answerConceptId="99466" answerLabel=""/>
                        </td>
                        <td>
                            <obs id="br" conceptId="99468" answerConceptId="99467" answerLabel=""/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label>
                                Test results in the last:
                            </label>
                        </td>
                        <td>
                            <obs conceptId="99469" answerConceptIds="90167,90166" answerLabels="Negative,Positive"/>
                        </td>
                        <td>
                            <obs conceptId="99470" answerConceptIds="90167,90166" answerLabels="Negative,Positive"/>
                        </td>
                        <td>
                            <obs conceptId="99471" answerConceptIds="90167,90166" answerLabels="Negative,Positive"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label>Number of sexual partners in the last 12 months:</label>
                        </td>
                        <td colspan="3">
                            <obs conceptId="99463"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label>Has your spouse /partner been tested for HIV before? :</label>
                        </td>
                        <td colspan="3">
                            <obs id="br" conceptId="99472" answerConceptIds="1065,1066,99480"
                                 answerLabels="Yes,No,Don't Know"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label class="label-right">Category</label>
                        </td>
                        <td style="background: #DADADA;">
                            <label>
                                <b>
                                    <obs conceptId="99472" answerConceptId="90003" answerLabel="Spouse:"/>
                                </b>
                            </label>
                        </td>
                        <td style="background: #DADADA;">
                            <label>
                                <b>
                                    <obs conceptId="99473" answerConceptId="90003" answerLabel="Steady/Regular:"/>
                                </b>
                            </label>
                        </td>
                        <td style="background: #DADADA;">
                            <label>
                                <b>
                                    <obs conceptId="99474" answerConceptId="90003" answerLabel="Casual:"/>
                                </b>
                            </label>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label class="label-right">Test results</label>
                        </td>
                        <td>
                            <obs conceptId="99477" answerConceptIds="90166,90167,90001"
                                 answerLabels="HIV +ve,HIV -ve,Unknown"/>
                        </td>
                        <td>
                            <obs conceptId="99478" answerConceptIds="90166,90167,90001"
                                 answerLabels="HIV +ve,HIV -ve,Unknown"/>
                        </td>
                        <td>
                            <obs conceptId="99479" answerConceptIds="90166,90167,90001"
                                 answerLabels="HIV +ve,HIV -ve,Unknown"/>
                        </td>
                    </tr>

                </tbody>
            </table>
        </section>
        <section>
            <h3>Consent for testing (Parent/Guardian if child)</h3>
            <table class="section-b">
                <tbody>
                    <tr>
                        <td>
                            <label>Do you agree to have his/her blood drawn for testing?</label>
                            <obs id="br" conceptId="99481" answerConceptIds="1065,1066" answerLabels="Yes,No"/>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section>
            <h3>Reasons given for NOT testing:</h3>
            <table class="section-b">
                <tbody>
                    <tr>
                        <td>
                            <label>No Confidentiality</label>
                        </td>
                        <td>
                            <label>No Benefit</label>
                        </td>
                        <td>
                            <label>Pricked many times</label>
                        </td>
                        <td>
                            <label>Will test after improving</label>
                        </td>
                        <td>
                            <label>No reason</label>
                        </td>
                        <td>
                            <label>Fear of HIV Result</label>
                        </td>
                        <td>
                            <label>Consult Spouse/sexual partner</label>
                        </td>
                        <td>
                            <label>Known HIV Status</label>
                        </td>
                        <td>
                            <label>Not ready for a test</label>
                        </td>
                        <td>
                            <label>Other(Specify)</label>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <obs conceptId="99482" answerConceptId="1065" answerLabel=""/>
                        </td>
                        <td>
                            <obs conceptId="99483" answerConceptId="1065" answerLabel=""/>
                        </td>
                        <td>
                            <obs conceptId="99484" answerConceptId="1065" answerLabel=""/>
                        </td>
                        <td>
                            <obs conceptId="99485" answerConceptId="1065" answerLabel=""/>
                        </td>
                        <td>
                            <obs conceptId="99486" answerConceptId="1065" answerLabel=""/>
                        </td>
                        <td>
                            <obs conceptId="99487" answerConceptId="1065" answerLabel=""/>

                        </td>
                        <td>
                            <obs conceptId="99488" answerConceptId="1065" answerLabel=""/>
                        </td>
                        <td>
                            <obs conceptId="99489" answerConceptId="1065" answerLabel=""/>
                        </td>
                        <td>
                            <obs conceptId="99490" answerConceptId="1065" answerLabel=""/>

                        </td>
                        <td>
                            <obs conceptId="99491" answerConceptId="1065" answerLabel=""/>
                            <br/>
                            <obs conceptId="99492"/>

                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section>
            <h3>Section C: Test Results</h3>
            <table class="section-b">
                <tbody>
                    <tr>
                        <td><label>HIV Results:</label>
                            <obs conceptId="99493" answerConceptIds="90167,90166" answerLabels="HIV Negative,HIV Positive"/>
                        </td>
                    </tr>
                    <tr>
                        <td><label>Results Recieved:</label>
                            <obs conceptId="99411" answerConceptIds="1065,1066" answerLabels="Yes,No"/>
                        </td>
                    </tr>
                    <tr>
                        <td><label>Results received as a couple:</label>
                            <obs conceptId="99494" answerConceptIds="1065,1066" answerLabels="Yes,No"/>
                        </td>
                    </tr>
                    <tr>
                        <td><label>Couple results:</label>
                            <obs conceptId="99497" answerConceptIds="6096,99496" answerLabels="Discordant,Cordant"/>
                        </td>
                    </tr>
                    <tr>
                        <td><label>Is there suspision for TB<br/>(Currentcough,fever,weightlossandnightsweats):</label>
                            <obs conceptId="99498" answerConceptIds="1065,1066" answerLabels="Yes,No"/>
                        </td>
                    </tr>
                    <tr>
                        <td><label>Has client started cotrimoxazole prophylaxis:</label>
                            <obs conceptId="99413" answerConceptIds="1065,1066" answerLabels="Yes,No"/>
                        </td>
                    </tr>
                    <tr>
                        <td><label>Has client been linked to care:</label>
                            <obs conceptId="99429" answerConceptIds="1065,1066" answerLabels="Yes,No"/>
                        </td>
                    </tr>
                    <tr>
                        <td><label>Counsellor</label>
                            <encounterProvider role="Counselor"  />
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section>
            <submit/>
        </section>
    </div>
    <small>
        <i>
            Version 1.2 Last revised on
            01/December/2015 - Ministry of Health
        </i>
    </small>
</htmlform>